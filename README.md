# Home SOC Project
This project provides a comprehensive guide to setting up a basic SOC in Azure, starting from scratch using a free Azure subscription. I went through the process of creating a virtual machine (VM) and turning it into a honeypot, intentionally opening it to the internet to capture real-world attack attempts. The security logs generated by the honeypot are then forwarded to a central repository for analysis. Finally, I integrated Microsoft Sentinel, Azure's powerful security information and event management (SIEM) service, to analyze the attack data, identify potential threats, and gain valuable experience in threat detection and incident response.

**Skills Learned**:

- **Cloud Computing Fundamentals**:
_Understanding of cloud infrastructure concepts (VMs, networking, storage).
Familiarity with the Azure platform and portal.
Resource management (creating, configuring, and managing Azure resources)._
- **Security Fundamentals**:
_Honeypot concepts and implementation.
Understanding of network security groups (NSGs) and their role in controlling network traffic.
Basic understanding of event logging and security event analysis.
Security event correlation and analysis._
Introduction to SIEM (Security Information and Event Management) systems.
- **Log Analysis and SIEM**:
_Log collection and forwarding.
Working with Log Analytics Workspaces (LAW).
Introduction to Azure Sentinel.
Data enrichment techniques (e.g., using watchlists for geolocation).
KQL (Kusto Query Language) proficiency for querying and analyzing security logs.
Threat visualization using workbooks and attack maps._
- **Practical Cybersecurity**:
_Hands-on experience with setting up a basic security monitoring solution.
Understanding of how to detect and respond to potential attacks.
Gaining experience with security tools and technologies used in real-world environments._
- **Troubleshooting**:
_Identifying and resolving issues related to VM configuration, network connectivity, and log forwarding.
Debugging KQL queries._

**Tools Used**:

* **Azure Portal**: _The web-based interface for managing Azure resources._
* **Azure Virtual Machines**: _For creating and managing virtual machines._
* **Network Security Groups (NSGs)**: _For controlling network traffic to and from the VM._
* **Windows Event Viewer**: _For viewing and analyzing Windows event logs._
* **Log Analytics Workspace (LAW)**: _For storing and querying log data._
* **Azure Sentinel**: _The cloud-native SIEM solution._
* **KQL (Kusto Query Language)**: _The query language used in Azure Log Analytics and Sentinel._
* **CSV Editor (e.g., Excel, Notepad++)**: _For viewing and editing the geoip-summarized.csv file._
* **Any text editor**: _for editing JSON files, and KQL queries._



**Part 1: Azure Subscription Setup**
[Image: Azure portal login screen]

Create a Free or Paid Azure Subscription: Choose a free account (if available) or a paid subscription, keeping cost-effectiveness in mind. Consider using Azure's free tier or a dedicated Cyber Range for cost management. Include links to Azure subscription creation and Cyber Range signup.
Azure Portal Login: Access the Azure portal at https://portal.azure.com.

**Part 2: Creating the Honeypot VM**
[Image: Azure Virtual Machines creation screen]

Create a Windows 10 VM: In the Azure portal, search for and create a new Windows 10 virtual machine. Choose an appropriate VM size, considering cost implications. Note the username and password.
Configure Network Security Group: Allow all inbound traffic in the VM's Network Security Group (NSG) for this educational honeypot. This is for testing purposes only and should not be done in production environments.
Disable Windows Firewall: Log into the VM and disable the Windows Firewall for testing purposes only. [Image: Windows Firewall settings showing it's disabled]

**Part 3: Simulating Attacks and Inspecting Logs**
Simulate Login Attempts: Attempt three failed logins using a test username (e.g., "employee").
Inspect Security Logs: Open Event Viewer on the VM and examine the security logs for the failed login attempts (Event ID 4625). Event ID 4625 specifically represents failed logon attempts in Windows security logs. [Image: Screenshot of Event Viewer showing Event ID 4625 entries]

**Part 4: Log Forwarding and KQL**
[Image: Diagram illustrating Log Analytics Workspace, Sentinel, and VM architecture]

Create Log Analytics Workspace: Create a Log Analytics Workspace to centralize your logs.
Create and Connect Sentinel: Create a Microsoft Sentinel instance and connect it to the Log Analytics Workspace.
Configure Data Connector: Configure the "Windows Security Events via AMA" connector in Sentinel to forward logs from the VM.
Query Logs: Use KQL queries (e.g., SecurityEvent | where EventId == 4625). This KQL query filters the SecurityEvent table to include only events where the EventId is 4625 (failed logon attempts). [Image: Example KQL query in Sentinel]

**Part 5: Log Enrichment and Geolocation**
[Image: Screenshot of the geoip-summarized.csv file]

Import GeoIP Data: Import the geoip-summarized.csv file as a Sentinel Watchlist named "geoip" to add geolocation data to your logs.
Enriched KQL Query: Use KQL with ipv4_lookup to enhance your query with geolocation information from the watchlist. The ipv4_lookup function joins the SecurityEvent logs with the geoip watchlist based on IP addresses, adding geolocation data to each log entry. [Image: KQL query showing geolocation enrichment]

**Part 6: Creating the Attack Map**
[Image: Screenshot of the Sentinel workbook with the attack map]

Create Sentinel Workbook: Create a new workbook in Sentinel.
Add Query and Map: Add a "Query" element and paste the provided JSON for the attack map. Configure the map settings to display attack locations.
Observe the Attack Map: Visualize the attack locations on the map. [Image: Close-up of the attack map showing attack origins]
